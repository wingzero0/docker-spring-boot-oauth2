services:

  db:
    image: postgres
    restart: always
    environment:
      POSTGRES_PASSWORD: example # postgres/example
    volumes:
      - ./postgresql/script:/docker-entrypoint-initdb.d
  
  adminer:
    image: adminer
    restart: always
    ports:
      - 8120:8080

  compiler:
    image: wingzzz2003/codeserver_ubuntu:4.9.1.java17
    restart: always
    volumes:
      - ./4.9.1/.config/code-server/config.yaml:/root/.config/code-server/config.yaml
      - ./4.9.1/.local/share/code-server/User/settings.json:/root/.local/share/code-server/User/settings.json
      - m2cache:/root/.m2/
      - ./:/root/external
    ports:
      - "8080-8082:8080-8082"
      - "9000:9000"
    entrypoint: code-server
    environment:
      - TZ=Asia/Macau

volumes:
  m2cache:
#  node1:
#    image: maven-xserver # or maven:3.6.0-jdk-11 if you run without IDE
#    volumes:
#      - appdata:/root/:Z
#    command: bash
#    stdin_open: true
#    tty: true
#    working_dir: /root
#  node2:
#    image: maven-xserver # or maven:3.6.0-jdk-11 if you run without IDE
#    volumes:
#      - appdata:/root/:Z
#    command: bash
#    stdin_open: true
#    tty: true
#    working_dir: /root
#
#  loadbalance:
#    image: nginx:stable
#    restart: always
#    depends_on:
#      - node1
#      - node2
#    volumes:
#      - ./site.conf:/etc/nginx/conf.d/default.conf
#    ports:
#      - 8081:8081
